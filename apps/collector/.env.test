# =============================================================================
# KRA Data Collector API - Test Environment Configuration
# =============================================================================

# Test Environment Marker
NODE_ENV=test
TEST_ENV=true

# Server Configuration
PORT=0  # Use random available port for tests
HOST=localhost

# Disable Redis in tests (override in specific tests if needed)
# REDIS_HOST=
# REDIS_PORT=
# REDIS_PASSWORD=
# REDIS_URL=

# Mock KRA API Configuration
KRA_API_BASE_URL=http://mock-kra-api.test
KRA_API_KEY=test-api-key
KRA_API_TIMEOUT=5000
KRA_API_RETRY_ATTEMPTS=1
KRA_API_RETRY_DELAY=100

# Test Database Configuration
DATABASE_URL=sqlite::memory:
TEST_DATABASE_URL=sqlite::memory:

# Logging Configuration (suppress in tests)
LOG_LEVEL=silent
LOG_FORMAT=simple
LOG_REQUESTS=false
LOG_SLOW_QUERIES=false

# Disable external services in tests
WEBHOOK_URL=
SLACK_WEBHOOK_URL=
SMTP_HOST=

# Test-specific settings
ENABLE_REDIS_IN_TESTS=false
SUPPRESS_TEST_LOGS=true
CLEANUP_AFTER_TESTS=true
SEED_TEST_DATA=false

# Security (use weak/default values for tests)
JWT_SECRET=test-jwt-secret-not-for-production
API_KEY=test-api-key-123
ENCRYPTION_KEY=test-encryption-key-not-for-prod

# Rate Limiting (relaxed for tests)
RATE_LIMIT_DEFAULT_MAX=1000
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_AUTH_MAX=5000
RATE_LIMIT_BURST_MAX=100

# Cache Configuration (minimal for tests)
CACHE_DEFAULT_TTL=1
CACHE_STATIC_TTL=1
CACHE_RACE_RESULT_TTL=1
CACHE_COMPRESSION=false

# Performance (minimal for tests)
MAX_JSON_SIZE=1mb
MAX_URLENCODED_SIZE=1mb
REQUEST_TIMEOUT=5000
COMPRESSION_THRESHOLD=0
COMPRESSION_LEVEL=1

# Monitoring (disabled in tests)
HEALTH_CHECK_DETAILED=false
HEALTH_CHECK_TIMEOUT=1000
METRICS_ENABLED=false
METRICS_INTERVAL=1000

# Test Data Configuration
TEST_DATE=20241201
TEST_MEET=서울
TEST_RACE_NO=1
TEST_HORSE_NO=20210001
TEST_JOCKEY_NO=001
TEST_TRAINER_NO=001

# Feature Flags (disabled in tests)
ENABLE_WEBSOCKET=false
ENABLE_GRAPHQL=false
ENABLE_ADMIN=false
ENABLE_BATCH_PROCESSING=false
ENABLE_API_DOCS=false
DEBUG_MODE=false
DEBUG_REQUESTS=false

# Test Timeouts
JEST_TIMEOUT=30000
TEST_TIMEOUT=10000
INTEGRATION_TEST_TIMEOUT=60000