# KRA API 분석 및 데이터 구조

## API 개요

KRA에서 제공하는 5개의 주요 API를 분석했습니다:
1. **API12_1**: 기수 정보 조회
2. **API214_1**: 경주 상세 결과 조회
3. **API299**: 경주결과 종합 (통계)
4. **API8_2**: 경주마 상세정보
5. **API19_1**: 조교사 상세정보

## 삼복승 예측을 위한 핵심 데이터

### 1. 말(Horse) 관련 핵심 지표
- **과거 성적**: 통산/올해 1,2,3착 횟수 및 승률
- **최근 경주 기록**: 경주 시간, 구간별 기록
- **체중 변화**: 경주 당일 체중 및 변화량
- **등급**: 현재 등급 및 등급 변화
- **나이 및 성별**: 경주 적합성 판단

### 2. 기수(Jockey) 관련 핵심 지표
- **승률**: 통산/올해 승률 (1착 횟수/총 출전 횟수)
- **연대율**: 3위 이내 입상 비율
- **경력**: 데뷔 연도 및 총 경력
- **최근 폼**: 올해 성적 vs 통산 성적 비교

### 3. 조교사(Trainer) 관련 핵심 지표
- **관리 말 성적**: 통산/올해 성적
- **경력 및 나이**: 경험치 판단
- **특정 조건 성적**: 거리별, 날씨별 성적

### 4. 경주 조건
- **거리**: 1000m, 1200m, 1400m 등
- **날씨**: 맑음, 흐림, 비
- **주로 상태**: 건조, 다습, 불량 (수분 함량 %)
- **부담 중량**: 각 말의 부담 중량

### 5. 시장 지표
- **배당률**: 단승/복승 배당률
- **출주 번호**: 게이트 위치

## 데이터 수집 전략

### 경기 전 수집 데이터 (예측용)
1. **API299**로 출전 말들의 과거 통계 수집
2. **API12_1**로 기수들의 성적 및 정보 수집
3. **API214_1**로 각 말의 최근 경주 기록 수집 (과거 3-5경주)
4. **API8_2**로 말의 상세 정보 및 혈통 데이터 수집
5. **API19_1**로 조교사의 상세 성적 및 최근 폼 수집

### 경기 후 수집 데이터 (검증용)
1. **API214_1**로 해당 경주의 최종 결과 수집
2. 실제 1,2,3위와 예측 결과 비교

## 예측 모델 고려사항

### 1. 가중치 배분 (초기 제안)
- 말의 최근 성적: 35%
- 기수 능력: 25%
- 조교사 성적: 15%
- 경주 조건 적합성: 15%
- 시장 배당률: 10%

### 2. 특별 고려사항
- **거리 적합성**: 말의 과거 동일 거리 성적
- **날씨 영향**: 주로 상태에 따른 과거 성적
- **체중 변화**: 급격한 체중 변화는 컨디션 지표
- **등급 변화**: 최근 승급/강급 여부
- **구간 기록**: 선행/추입 성향 파악

### 3. 제외 데이터
- 경주 당일 최종 착순
- 실제 주파 기록
- 사후 분석 데이터

## 다음 단계

1. 데이터 수집 스크립트 작성
2. 초기 예측 프롬프트 템플릿 개발
3. 샘플 경주로 테스트
4. 결과 분석 및 프롬프트 개선