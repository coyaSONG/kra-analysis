# 프롬프트 개발 전략

## 문제점 인식

현재 단일 경기(부경 20250523 1경주)만으로 프롬프트를 개선하려 했으나, 이는 다음과 같은 문제가 있습니다:

1. **과적합(Overfitting) 위험**: 한 경기의 특성에만 맞춰진 프롬프트
2. **일반화 부족**: 다양한 경기 조건에서 작동하지 않을 가능성
3. **편향된 가중치**: 특정 경기 결과에만 최적화된 가중치

## 개선된 접근 방법

### 1. 다양한 경기 데이터 수집
- **최소 10-20개 경기** 데이터 필요
- **다양한 조건** 포함:
  - 서로 다른 경마장 (서울, 부경, 제주)
  - 다양한 거리 (단거리, 중거리, 장거리)
  - 다양한 주로 상태 (건조, 다습, 불량)
  - 다양한 날씨 조건
  - 평일/주말 경기

### 2. 패턴 분석 접근법
```
1. 수집된 모든 경기에 대해 다음 분석:
   - 1-3위 말들의 공통 특성
   - 인기마 적중률
   - 다크호스 출현 빈도
   - 가중치별 상관관계

2. 경기 조건별 특성 파악:
   - 거리별 중요 요소 차이
   - 주로 상태별 영향도
   - 경마장별 특성

3. 예측 실패 사례 분석:
   - 공통적인 실패 원인
   - 놓친 신호들
   - 과대/과소 평가 패턴
```

### 3. 프롬프트 검증 방법
1. **교차 검증**: 수집된 데이터를 훈련셋과 검증셋으로 분리
2. **백테스팅**: 과거 경기에 적용하여 성능 측정
3. **일관성 테스트**: 다양한 조건에서 안정적인 성능 확인

## 데이터 수집 계획

### Phase 1: 최근 경기 수집 (2025년 5-6월)
- 각 경마장별 10개 경기
- 총 30개 경기 목표

### Phase 2: 다양성 확보
- 계절별 데이터 (봄/여름/가을/겨울)
- 특수 경기 (대상경주, 그레이드 경주)
- 신마 경주 vs 경험마 경주

### Phase 3: 실시간 검증
- 새로운 경기에 실시간 적용
- 예측 결과 추적
- 지속적 개선

## 프롬프트 개발 로드맵

### v2.0 (긴급 개선)
- 시장 평가 가중치 조정
- 데이터 부족 말 처리
- 기본적인 검증 로직

### v3.0 (데이터 기반 개선)
- 10개 이상 경기 분석 기반
- 조건별 가중치 동적 조정
- 패턴 인식 강화

### v4.0 (고급 최적화)
- 30개 이상 경기 분석 기반
- 머신러닝 인사이트 통합
- 경기별 특화 전략

## 성공 지표

1. **적중률**: 최소 30% 이상 (업계 평균 20-25%)
2. **일관성**: 모든 경마장에서 유사한 성능
3. **수익성**: 장기적으로 양의 수익률
4. **안정성**: 극단적인 실패 최소화

## 다음 단계

1. `collect_multiple_races.py` 실행하여 데이터 수집
2. 수집된 데이터 분석 및 패턴 도출
3. 패턴 기반 프롬프트 v3.0 작성
4. 백테스팅 및 검증
5. 실전 적용 및 모니터링