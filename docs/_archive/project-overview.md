# 경마 데이터 분석 및 삼복연승 예측 프로젝트

## 프로젝트 개요

한국마사회(KRA) 경마 데이터를 활용하여 삼복연승 결과를 예측하는 AI 프롬프트를 개발하고, 지속적으로 개선하는 시스템 구축

## 핵심 목표

1. **데이터 수집**: 경기 결과를 모르는 상태의 경마 데이터 수집
2. **예측 프롬프트 개발**: Claude Code를 활용한 삼복연승 예측 프롬프트 작성
3. **정확도 분석**: 예측 결과와 실제 경기 결과 비교 분석
4. **지속적 개선**: 분석 결과를 바탕으로 프롬프트 개선

## 주요 용어 정의

- **삼복연승**: 1, 2, 3위에 들어올 말 3마리를 맞추는 베팅 방식 (순서 무관)
- **KRA**: 한국마사회 (Korea Racing Authority)

## 시스템 워크플로우

```
1. 경마 데이터 수집 (경기 전 데이터)
   ↓
2. 예측 프롬프트 실행 (Claude Code 활용)
   ↓
3. 삼복연승 예측 결과 생성
   ↓
4. 실제 경기 결과 수집 (1-2-3위 착순)
   ↓
5. 예측 결과와 실제 결과 비교
   ↓
6. 정확도 계산 및 분석
   ↓
7. 프롬프트 개선점 도출
   ↓
8. 개선된 프롬프트로 다시 1번부터 반복
```

## 데이터 요구사항

### 필수 데이터 (경기 전 정보)
- 출전 말 정보 (나이, 성별, 체중 등)
- 기수 정보 및 전적
- 조교사 정보
- 과거 경주 기록
- 날씨 및 트랙 상태
- 배당률

### 분석 제외 데이터
- 경기 결과
- 최종 순위
- 실제 주파 기록

## 기술 스택 (예정)

- **분석 도구**: Claude Code
- **데이터 처리**: Python (pandas, numpy)
- **데이터 저장**: CSV/JSON 형식
- **시각화**: matplotlib, seaborn (선택사항)

## 성공 지표

1. **완전 적중률**: 예측한 3마리가 모두 1-3위 내 포함 (목표: 70% 이상)
2. **부분 적중률**: 예측한 3마리 중 2마리가 1-3위 내 포함
3. **평균 적중 마리수**: 각 경주당 평균적으로 맞춘 말의 수
4. **프롬프트 개선을 통한 정확도 향상률**

## 현재 진행 상황

- **기본 프롬프트**: base-prompt-v1.0.md (초기 테스트 50% 적중률)
- **재귀 개선 시스템**: v4 개발 완료 (개별 경주 분석 + 통합 복기)
- **평가 도구**: 
  - evaluate_prompt_v3.py: 결과 비교 평가
  - predict_only_test.py: 예측 전용 테스트 (경주 전 데이터만 사용)
- **데이터 분석**: enriched 데이터 패턴 분석 도구 개발 완료

## 향후 고려사항

- 다양한 경주 조건별 프롬프트 세분화
- 실시간 데이터 반영 시스템 구축
- 예측 신뢰도 지표 개발
